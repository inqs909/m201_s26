{
  "hash": "6484ffdc06770bf03fdbde47c8e43912",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Categorical Data\"\ndescription: \"Descriptive summaries & visualizations (freq, proportion, crosstabs, bar/pie/mosaic/waffle)\"\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    code-fold: false\n    smooth-scroll: true\neditor: source\nimage: img/cat.png\nknitr:\n  opts_chunk: \n    echo: true\n    eval: true\n    message: true\n    error: true\n    warnings: false\n    comment: \"#>\" \n---\n\n\n\n# Introduction\n\n- Recognize and work with **categorical variables** in R.\n- Summarize categories using **frequencies** and **proportions** (a.k.a. relative frequency).\n- Create standard plots for categorical data: **bar**, **stacked bar**, **pie**, **mosaic**, and **waffle**.K\n- Read and interpret **cross‑tabulations** (two‑way tables) with row/column/table proportions.\n\n::: callout-tip\nUse the **Copy** button on each code chunk. Many chunks include a **template** version followed by a **worked example**.\n:::\n\n\n# Google Colab Setup\n\n\nCopy the following code and put it in a code cell in Google Colab. Only do this if you are using a completely new notebook.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This code will load the R packages we will use\ninstall.packages(c(\"rcistats\"),\n                 repos = c(\"https://inqs909.r-universe.dev\", \"https://cloud.r-project.org\"))\nlibrary(rcistats)\nlibrary(tidyverse)\n\n\n# Uncomment and run for themes\n# rcistats::install_themes()\n# library(ThemePark)\n# library(ggthemes)\n```\n:::\n\n\n\n## Data for this handout\n\nWe will use the **Great American Coffee Taste Test** survey data from TidyTuesday. Below is a subset of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ncoffee <- read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2024/2024-05-14/coffee_survey.csv\")\n```\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f1b14c442c536464cd36\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f1b14c442c536464cd36\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],[\"pLRj4B\",\"lNlkMX\",\"xdNOWd\",\"xdN8z5\",\"NAB1WB\",\"YZVORq\",\"Al4vRB\",\"42N6r5\",\"zKQ92a\",\"AlbgaB\"],[\"55-64 years old\",\"35-44 years old\",\"25-34 years old\",\"25-34 years old\",\"25-34 years old\",\"35-44 years old\",\"45-54 years old\",\"25-34 years old\",\"&gt;65 years old\",\"25-34 years old\"],[\"3\",\"2\",\"1\",\"2\",\"2\",\"4\",\"3\",\"1\",\"2\",\"2\"],[\"At the office, At home, At a cafe\",\"At home\",\"At home, On the go, At the office, At a cafe\",\"At home, At a cafe, At the office\",\"At home, At the office, At a cafe\",\"At home, At a cafe\",\"At the office, On the go, At a cafe\",\"At home\",\"At home\",\"At the office, On the go, At home\"],[\"Other\",\"Espresso\",\"Pour over, Espresso\",\"Pour over\",\"Pour over\",\"Espresso, Bean-to-cup machine, Cold brew, Pour over\",null,\"Espresso, Pour over, Coffee extract (e.g. Cometeer)\",\"Pour over, French press, Espresso, Pod/capsule machine (e.g. Keurig/Nespresso)\",\"Pour over, Espresso, French press, Coffee brewing machine (e.g. Mr. Coffee)\"],[\"Aeropress\",null,null,null,null,null,null,null,null,null],[null,null,\"Specialty coffee shop, National chain (e.g. Starbucks, Dunkin)\",null,null,null,\"Specialty coffee shop, National chain (e.g. Starbucks, Dunkin), Local cafe\",null,null,\"Specialty coffee shop, Other, Local cafe\"],[null,null,null,null,null,null,null,null,null,\"Online through roasters\"],[\"Pourover\",\"Cappuccino\",\"Espresso\",\"Pourover\",\"Pourover\",\"Espresso\",\"Americano\",\"Latte\",\"Espresso\",\"Pourover\"],[null,null,null,null,null,null,null,null,null,null],[\"No - just black\",\"Milk, dairy alternative, or coffee creamer\",\"No - just black, Milk, dairy alternative, or coffee creamer\",\"No - just black\",\"No - just black\",\"No - just black\",\"No - just black, Milk, dairy alternative, or coffee creamer\",\"No - just black\",\"No - just black, Milk, dairy alternative, or coffee creamer\",\"No - just black\"],[null,null,null,null,null,null,null,null,null,null],[null,\"Whole milk\",\"Whole milk\",null,null,null,\"Almond milk, Half and half\",null,\"Half and half, Whole milk\",null],[null,null,null,null,null,null,null,null,null,null],[\"Chocolatey\",\"Chocolatey\",\"Fruity\",\"Fruity\",\"Fruity\",\"Fruity\",\"Full Bodied\",\"Caramalized\",\"Full Bodied\",\"Fruity\"],[\"Somewhat strong\",\"Medium\",\"Medium\",\"Somewhat strong\",\"Medium\",\"Somewhat strong\",\"Somewhat strong\",\"Very strong\",\"Somewhat strong\",\"Somewhat strong\"],[\"Blonde\",\"Medium\",\"Light\",\"Medium\",\"Light\",\"Light\",\"Italian\",\"Medium\",\"Medium\",\"Light\"],[\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\"],[7,8,8,9,7,9,6,6,7,7],[3,2,2,1,1,2,4,2,2,2],[2,2,4,4,4,4,3,1,3,5],[4,4,4,3,4,5,3,3,5,4],[\"Rich bold\",\"warm tea\",\"Mellow, bright but not sour, juicy\",\"light body, generally balances, mildly vegetal, peach, earthy- it's pretty good but not my favorite\",\"Chocolate Orange\",\"By far my favorite. I would serve this to company. This is coffee that I would love to drink while I'm having a conversation, and I could definitely have more than one cup of it.\",null,\"Subtle\",\"Sweet, honey, berry\",\"Nice sharp acidity. Definitely going to order from this roaster soon.\"],[3,3,2,4,3,4,3,2,2,2],[1,2,3,1,3,1,2,2,2,2],[5,2,3,1,2,1,4,2,3,2],[\"Smooth\",\"astringent, darker, little nutty\",\"Balanced, straightforward, not complex, good aftertaste\",\"Smoky, very bitter, slight chocolate and caramel sugars, flat, lacking sweetness, tastes of stale coffee- I typically swoon over George Howell (there was a particular Kenyan SL-28 from them that won my heart) but I did not like this one bit. Very K-cuppy\",\"Woody\",\"This tasted like coffee I would get at a nice hotel. Just fine, but nothing to rave about.\",null,null,\"Chocolate, nutty, spicey, herbal\",\"Tea-like body and taste. Not a lot going for it.\"],[4,3,2,4,4,3,3,3,3,3],[3,1,2,2,2,3,3,3,3,1],[2,3,2,2,3,2,3,3,4,3],[\"Sour\",\"astringent tannins, minor-ly tea like\",\"Very plain, tastes like COFFEE, doesn't linger after swallowing\",\"Bit roasty, deep caramels, slight astringency, more balanced and sweet on cooling- this one was fine and is definitely a crowd-pleaser but reminded me of drip from Caribou/Pike Place from Starbucks. Not my fav.\",\"dark chocolate\",\"If I was serve this in a diner, I would think that it was really good diner coffee. That was a sense that we had when we were doing the tasting. If I got it in a third wave shop, I'd be disappointed, but in a diner it would be a pleasant surprise.\",null,\"darker\",\"Floral, jasmin, earthy, full body\",\"A bit more tasty than others. Nutty and classic in taste.\"],[3,1,2,1,1,3,5,2,2,1],[3,2,2,3,4,4,4,3,null,5],[2,5,3,5,5,5,1,4,4,5],[\"Empty\",\"smooth, blueberries, lovely\",\"Very light body, no staying power, weirdly both bitter and acidic, I have actually no idea what this tastes like\",\"Sweet, juicy, some cherry, deep berry, round, delicious fruit punch bomb explosion of happiness. Please sir, may I have some more?\",\"Fruit, Strawberry\",\"This was a chameleon of a coffee. It seemed to be really dependent on which coffee we had beforehand. If I drink this after the George Howell, it tasted funky. Almost cheesy. After equator, it was very fruity. After Klatch, more of the roasting notes came out. This is a coffee that I would want to drink by myself so that I could really ponder it while I drink it. I also probably couldn't have more than one cup of it at a time.\",null,\"favorite, complex\",\"Unique, floral, hibiscus, fruity, for spécial days but not everyday consumptions.\",\"This was our favorite. Reminds us of blackberries.\"],[\"Coffee B\",\"Coffee A\",\"Coffee A\",\"Coffee A\",\"Coffee A\",\"Coffee A\",\"Coffee B\",\"Coffee B\",\"Coffee A\",\"Coffee A\"],[\"Coffee A\",\"Coffee D\",\"Coffee A\",\"Coffee D\",\"Coffee D\",\"Coffee D\",\"Coffee A\",\"Coffee D\",\"Coffee A\",\"Coffee D\"],[\"Coffee B\",\"Coffee D\",\"Coffee A\",\"Coffee D\",\"Coffee D\",\"Coffee A\",\"Coffee B\",\"Coffee D\",\"Coffee A\",\"Coffee D\"],[\"I primarily work in person\",\"I primarily work from home\",\"I do a mix of both\",\"I primarily work in person\",\"I primarily work in person\",\"I primarily work from home\",\"I do a mix of both\",\"I primarily work from home\",null,\"I primarily work in person\"],[\"$20-$40\",\"$40-$60\",\"$40-$60\",\"$20-$40\",\"$40-$60\",\"$40-$60\",\"$80-$100\",\"$20-$40\",null,\"$40-$60\"],[\"It tastes good, I need the caffeine\",\"It tastes good\",\"It tastes good\",\"It tastes good, Other\",\"It tastes good, I need the caffeine, I need the ritual\",\"It tastes good, I need the caffeine, I need the ritual\",\"It tastes good, I need the caffeine, I need the ritual\",\"It tastes good\",null,\"It tastes good, I need the ritual\"],[null,null,null,\"My wife and I are both coffee professionals\",null,null,null,null,null,null],[\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",null,\"Yes\"],[\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"No\",\"Yes\",null,\"Yes\"],[\"$6-$8\",\"$10-$15\",\"$8-$10\",\"$15-$20\",\"$6-$8\",\"$10-$15\",\"$8-$10\",\"$6-$8\",null,\"$6-$8\"],[\"$2-$4\",\"$15-$20\",\"$15-$20\",\"$15-$20\",\"$6-$8\",\"More than $20\",\"$6-$8\",\"$6-$8\",null,\"$8-$10\"],[\"No\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"No\",null,\"No\"],[\"$100-$300\",\"More than $1,000\",\"More than $1,000\",\"More than $1,000\",\"$300-$500\",\"More than $1,000\",\"More than $1,000\",\"$100-$300\",null,null],[\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",null,null],[\"Male\",\"Female\",\"Male\",\"Male\",\"Male\",\"Male\",\"Male\",\"Male\",null,\"Male\"],[null,null,null,null,null,null,null,null,null,null],[\"Doctorate or professional degree\",\"Some college or associate's degree\",\"Master's degree\",\"Bachelor's degree\",\"Bachelor's degree\",\"Bachelor's degree\",\"Master's degree\",\"Some college or associate's degree\",null,\"Some college or associate's degree\"],[\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",null,\"White/Caucasian\"],[null,null,null,null,null,null,null,null,null,null],[\"Employed full-time\",\"Employed full-time\",\"Student\",\"Employed full-time\",\"Employed full-time\",\"Employed full-time\",\"Employed full-time\",\"Student\",null,\"Employed full-time\"],[\"3\",\"None\",\"None\",\"1\",\"None\",\"None\",\"2\",\"None\",null,\"None\"],[\"Republican\",\"Independent\",\"Democrat\",\"No affiliation\",\"Democrat\",\"Democrat\",\"Independent\",\"Democrat\",null,\"Democrat\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>submission_id<\\/th>\\n      <th>age<\\/th>\\n      <th>cups<\\/th>\\n      <th>where_drink<\\/th>\\n      <th>brew<\\/th>\\n      <th>brew_other<\\/th>\\n      <th>purchase<\\/th>\\n      <th>purchase_other<\\/th>\\n      <th>favorite<\\/th>\\n      <th>favorite_specify<\\/th>\\n      <th>additions<\\/th>\\n      <th>additions_other<\\/th>\\n      <th>dairy<\\/th>\\n      <th>sweetener<\\/th>\\n      <th>style<\\/th>\\n      <th>strength<\\/th>\\n      <th>roast_level<\\/th>\\n      <th>caffeine<\\/th>\\n      <th>expertise<\\/th>\\n      <th>coffee_a_bitterness<\\/th>\\n      <th>coffee_a_acidity<\\/th>\\n      <th>coffee_a_personal_preference<\\/th>\\n      <th>coffee_a_notes<\\/th>\\n      <th>coffee_b_bitterness<\\/th>\\n      <th>coffee_b_acidity<\\/th>\\n      <th>coffee_b_personal_preference<\\/th>\\n      <th>coffee_b_notes<\\/th>\\n      <th>coffee_c_bitterness<\\/th>\\n      <th>coffee_c_acidity<\\/th>\\n      <th>coffee_c_personal_preference<\\/th>\\n      <th>coffee_c_notes<\\/th>\\n      <th>coffee_d_bitterness<\\/th>\\n      <th>coffee_d_acidity<\\/th>\\n      <th>coffee_d_personal_preference<\\/th>\\n      <th>coffee_d_notes<\\/th>\\n      <th>prefer_abc<\\/th>\\n      <th>prefer_ad<\\/th>\\n      <th>prefer_overall<\\/th>\\n      <th>wfh<\\/th>\\n      <th>total_spend<\\/th>\\n      <th>why_drink<\\/th>\\n      <th>why_drink_other<\\/th>\\n      <th>taste<\\/th>\\n      <th>know_source<\\/th>\\n      <th>most_paid<\\/th>\\n      <th>most_willing<\\/th>\\n      <th>value_cafe<\\/th>\\n      <th>spent_equipment<\\/th>\\n      <th>value_equipment<\\/th>\\n      <th>gender<\\/th>\\n      <th>gender_specify<\\/th>\\n      <th>education_level<\\/th>\\n      <th>ethnicity_race<\\/th>\\n      <th>ethnicity_race_specify<\\/th>\\n      <th>employment_status<\\/th>\\n      <th>number_children<\\/th>\\n      <th>political_affiliation<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"p\",\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[19,20,21,22,24,25,26,28,29,30,32,33,34]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"submission_id\",\"targets\":1},{\"name\":\"age\",\"targets\":2},{\"name\":\"cups\",\"targets\":3},{\"name\":\"where_drink\",\"targets\":4},{\"name\":\"brew\",\"targets\":5},{\"name\":\"brew_other\",\"targets\":6},{\"name\":\"purchase\",\"targets\":7},{\"name\":\"purchase_other\",\"targets\":8},{\"name\":\"favorite\",\"targets\":9},{\"name\":\"favorite_specify\",\"targets\":10},{\"name\":\"additions\",\"targets\":11},{\"name\":\"additions_other\",\"targets\":12},{\"name\":\"dairy\",\"targets\":13},{\"name\":\"sweetener\",\"targets\":14},{\"name\":\"style\",\"targets\":15},{\"name\":\"strength\",\"targets\":16},{\"name\":\"roast_level\",\"targets\":17},{\"name\":\"caffeine\",\"targets\":18},{\"name\":\"expertise\",\"targets\":19},{\"name\":\"coffee_a_bitterness\",\"targets\":20},{\"name\":\"coffee_a_acidity\",\"targets\":21},{\"name\":\"coffee_a_personal_preference\",\"targets\":22},{\"name\":\"coffee_a_notes\",\"targets\":23},{\"name\":\"coffee_b_bitterness\",\"targets\":24},{\"name\":\"coffee_b_acidity\",\"targets\":25},{\"name\":\"coffee_b_personal_preference\",\"targets\":26},{\"name\":\"coffee_b_notes\",\"targets\":27},{\"name\":\"coffee_c_bitterness\",\"targets\":28},{\"name\":\"coffee_c_acidity\",\"targets\":29},{\"name\":\"coffee_c_personal_preference\",\"targets\":30},{\"name\":\"coffee_c_notes\",\"targets\":31},{\"name\":\"coffee_d_bitterness\",\"targets\":32},{\"name\":\"coffee_d_acidity\",\"targets\":33},{\"name\":\"coffee_d_personal_preference\",\"targets\":34},{\"name\":\"coffee_d_notes\",\"targets\":35},{\"name\":\"prefer_abc\",\"targets\":36},{\"name\":\"prefer_ad\",\"targets\":37},{\"name\":\"prefer_overall\",\"targets\":38},{\"name\":\"wfh\",\"targets\":39},{\"name\":\"total_spend\",\"targets\":40},{\"name\":\"why_drink\",\"targets\":41},{\"name\":\"why_drink_other\",\"targets\":42},{\"name\":\"taste\",\"targets\":43},{\"name\":\"know_source\",\"targets\":44},{\"name\":\"most_paid\",\"targets\":45},{\"name\":\"most_willing\",\"targets\":46},{\"name\":\"value_cafe\",\"targets\":47},{\"name\":\"spent_equipment\",\"targets\":48},{\"name\":\"value_equipment\",\"targets\":49},{\"name\":\"gender\",\"targets\":50},{\"name\":\"gender_specify\",\"targets\":51},{\"name\":\"education_level\",\"targets\":52},{\"name\":\"ethnicity_race\",\"targets\":53},{\"name\":\"ethnicity_race_specify\",\"targets\":54},{\"name\":\"employment_status\",\"targets\":55},{\"name\":\"number_children\",\"targets\":56},{\"name\":\"political_affiliation\",\"targets\":57}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Using the templates: what to change\n\nUse this legend whenever you see a **Template** code block.\n\n- **`DATA`** → replace with your data frame/tibble name (e.g., `coffee`).\n- **`VAR`** → replace with the **single categorical variable** you want (e.g., `caffeine`).\n  - In `ggplot(DATA, aes(x = VAR))`, write `ggplot(coffee, aes(x = caffeine))`.\n  - In functions that take a vector (e.g., `cat_stats(DATA$VAR)`), write `cat_stats(coffee$caffeine)`.\n- **`VAR1`** and **`VAR2`** → replace with the **first** and **second** categorical variables for two‑way tables/stacked bars (e.g., `caffeine`, `taste`).\n- **`DF` / `wdf` / `df_pie` / `waffle_df`** → these are **intermediate objects** created in the chunk. You can keep the same names or rename them; if you rename, update the subsequent line that uses them.\n- **`group = 1`** → keep this as‑is for one‑variable proportion bar charts; it ensures correct normalization.\n\n### Quick replace checklist\n1. Swap **`DATA`** for your data frame (usually `coffee`).\n2. Swap **`VAR`** for your categorical column (e.g., `caffeine`).\n3. For two‑variable templates, set **`VAR1`** and **`VAR2`** (e.g., `caffeine` and `taste`).\n4. If you change any intermediate object name (like `df_pie`), update it on the next line as well.\n\n### Tiny example\n\n**Template**\n```r\n# Frequency bar (template)\n ggplot(DATA, aes(x = VAR)) +\n   geom_bar()\n```\n\n**Filled‑in**\n```r\n# Frequency bar (coffee example)\n ggplot(coffee, aes(x = caffeine)) +\n   geom_bar()\n```\n\n**Template**\n```r\n# Crosstab row proportions (template)\n cat_stats(VAR1, VAR2, prop = \"row\")\n```\n\n**Filled‑in**\n```r\n# Crosstab row proportions (coffee example)\n cat_stats(coffee$caffeine, coffee$taste, prop = \"row\")\n```\n\n\n# Categorical Data\n\n**Categorical data** record membership in a set of categories (levels), e.g., \"Yes/No\", \"Major\", or \"City\".\n\n- Stored as text (character/factor) **or** as codes like `1, 2, 3` with a **codebook** describing the labels.\n\n\n# One‑variable summaries\n\n## Frequency (counts)\n\n**Definition:** number of observations in each category.\n\n**Template:**\n```r\n# Replace DATA$VAR with your variable\n# freq table (counts)\ncat_stats(DATA$VAR)\n```\n\n**Example:** caffeine preference (`coffee$caffeine`)\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>                  n   prop\n#> Decaf          136 0.0347\n#> Full caffeine 3576 0.9129\n#> Half caff      205 0.0523\n#> \n#> Number of Missing: 125\n#> Proportion of Missing: 0.0309252845126175\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n## Proportion (relative frequency)\n\n**Definition:** share of the sample in each category; comparable across sample sizes.\n\n**Template:**\n```r\n# proportions only\ncat_stats(DATA$VAR)\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>                  n   prop\n#> Decaf          136 0.0347\n#> Full caffeine 3576 0.9129\n#> Half caff      205 0.0523\n#> \n#> Number of Missing: 125\n#> Proportion of Missing: 0.0309252845126175\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n# Two‑variable summaries (cross‑tabulation)\n\n\n## Cross‑tabulation (two‑way table)\n\n- **Rows**: categories of one variable\n- **Columns**: categories of the second variable\n- Report **counts** or **proportions** by **table**, **row**, or **column**\n\n**ALL**:\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>               No                              Yes                              \n#> Decaf         \"26 / 0.0073 / 0.208 / 0.2653\"  \"99 / 0.0279 / 0.792 / 0.0287\"   \n#> Full caffeine \"66 / 0.0186 / 0.0203 / 0.6735\" \"3178 / 0.8957 / 0.9797 / 0.9212\"\n#> Half caff     \"6 / 0.0017 / 0.0335 / 0.0612\"  \"173 / 0.0488 / 0.9665 / 0.0501\" \n#> Col Totals    \"98 / 0.0276\"                   \"3450 / 0.9724\"                  \n#>               Row Totals     \n#> Decaf         \"125 / 0.0352\" \n#> Full caffeine \"3244 / 0.9143\"\n#> Half caff     \"179 / 0.0505\" \n#> Col Totals    \"Total: 3548\"  \n#> \n#> Cell Contents: n / tbl % / row % / col % \n#> Col Totals Contents: n / row % \n#> Row Totals Contents: n / col % \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n\n**Table proportions** (each cell ÷ grand total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"table\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>               No            Yes             Row Totals     \n#> Decaf         \"26 / 0.0073\" \"99 / 0.0279\"   \"125 / 0.0352\" \n#> Full caffeine \"66 / 0.0186\" \"3178 / 0.8957\" \"3244 / 0.9143\"\n#> Half caff     \"6 / 0.0017\"  \"173 / 0.0488\"  \"179 / 0.0505\" \n#> Col Totals    \"98 / 0.0276\" \"3450 / 0.9724\" \"Total: 3548\"  \n#> \n#> Cell Contents: n / tbl % \n#> Col Totals Contents: n / row % \n#> Row Totals Contents: n / col % \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n**Row proportions** (each cell ÷ its row total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"row\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>               No            Yes             Row Totals     \n#> Decaf         \"26 / 0.208\"  \"99 / 0.792\"    \"125 / 0.0352\" \n#> Full caffeine \"66 / 0.0203\" \"3178 / 0.9797\" \"3244 / 0.9143\"\n#> Half caff     \"6 / 0.0335\"  \"173 / 0.9665\"  \"179 / 0.0505\" \n#> Col Totals    \"98 / 0.0276\" \"3450 / 0.9724\" \"Total: 3548\"  \n#> \n#> Cell Contents: n / row % \n#> Col Totals Contents: n / row % \n#> Row Totals Contents: n / col % \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n**Column proportions** (each cell ÷ its column total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"col\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>               No            Yes             Row Totals     \n#> Decaf         \"26 / 0.2653\" \"99 / 0.0287\"   \"125 / 0.0352\" \n#> Full caffeine \"66 / 0.6735\" \"3178 / 0.9212\" \"3244 / 0.9143\"\n#> Half caff     \"6 / 0.0612\"  \"173 / 0.0501\"  \"179 / 0.0505\" \n#> Col Totals    \"98 / 0.0276\" \"3450 / 0.9724\" \"Total: 3548\"  \n#> \n#> Cell Contents: n / col % \n#> Col Totals Contents: n / row % \n#> Row Totals Contents: n / col % \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n# Visualizing Categorical Data\n\n## Bar plots\n\n### Frequency bar plot\n\n**Template (frequency):**\n```r\n# ggplot() + geom_bar() counts rows per category by default\nggplot(DATA, aes(x = VAR)) +\n  geom_bar()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### Relative frequency bar plot\n\n**Template (proportion):**\n```r\n# after_stat(prop) computes proportions within the layer\nggplot(DATA, aes(x = VAR, y = after_stat(prop), group = 1)) +\n  geom_bar()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine, y = after_stat(prop), group = 1)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n::: callout-note\n**Tip:** Add labels/theme as needed: `labs(x = \"\", y = \"Proportion\") + theme_minimal()`\n:::\n\n\n## Stacked bar plots\n\n**Template:**\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar()\n```\n\n**Example (stacked counts):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine, fill = taste)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-10-1.png){fig-alt='A bar plot showing the caffeine levels by different tastes.' width=672}\n:::\n:::\n\n\n**Example (horizontal):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(y = caffeine, fill = taste)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n**Template (stacked proportions):**\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position = \"fill\") +\n  labs(y = \"Proportion\")\n```\n\n## Pie charts (use sparingly)\n\n**Note:** Pie charts can be harder to compare precisely than bars. If you use them, label clearly.\n\n**Template:**\n```r\ndf_pie <- cat_stats(DATA$VAR, tbl_df = TRUE)$table\nggplot(df_pie, aes(cat = Category, val = n, fill = Category)) +\n  geom_pie()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\ncoffee_pie <- cat_stats(coffee$caffeine, tbl_df = TRUE)$table\nggplot(coffee_pie, aes(cat = Category, val = n, fill = Category)) +\n  geom_pie()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n# Appendix: minimal templates (copy‑paste)\n\nEach template below has **placeholders** in ALL CAPS (e.g., `DATA`, `VAR`, `VAR1`, `VAR2`). Replace them with your own dataset name and variable names.\n\n\n## Frequency table\n\n```r\ncat_stats(DATA$VAR)   \n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n## Proportions only\n\n```r\ncat_stats(DATA$VAR, prop_only = TRUE)\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Bar Plot: Frequency\n\n```r\nggplot(DATA, aes(x = VAR)) + \n    geom_bar()\n```\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Bar Plot: Proportion\n\n```r\nggplot(DATA, aes(x = VAR, y = after_stat(prop), group = 1)) + \n    geom_bar()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Cross-tabulations (all)\n\n```r\ncat_stats(DATA$VAR1, DATA$VAR2)\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Cross-tabulations (proportions)\n\n```r\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"table\")\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"row\")\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"col\")\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Stacked bar (counts)\n\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) + geom_bar()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Stacked bar (proportions)\n\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position = \"fill\") + labs(y = \"Proportion\")\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Pie Chart\n\n```r\ndf_pie <- cat_stats(DATA$VAR, tbl_df = TRUE)$table\nggplot(df_pie, aes(cat = Category, val = n, fill = Category)) + \n    geom_pie()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n",
    "supporting": [
      "cat_stats_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.9/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.34.0/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}