{
  "hash": "f41878fbf129fffb1d4c32e594b058c0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Categorical Data\"\ndescription: \"Descriptive summaries & visualizations (freq, proportion, crosstabs, bar/pie/mosaic/waffle)\"\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    code-fold: false\n    smooth-scroll: true\neditor: source\nimage: img/cat.png\nknitr:\n  opts_chunk: \n    echo: true\n    eval: true\n    message: true\n    error: true\n    warnings: false\n    comment: \"#>\" \n---\n\n\n\n# Introduction\n\n- Recognize and work with **categorical variables** in R.\n- Summarize categories using **frequencies** and **proportions** (a.k.a. relative frequency).\n- Create standard plots for categorical data: **bar**, **stacked bar**, **pie**, **mosaic**, and **waffle**.K\n- Read and interpret **cross‑tabulations** (two‑way tables) with row/column/table proportions.\n\n::: callout-tip\nUse the **Copy** button on each code chunk. Many chunks include a **template** version followed by a **worked example**.\n:::\n\n\n# Google Colab Setup\n\n\nCopy the following code and put it in a code cell in Google Colab. Only do this if you are using a completely new notebook.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This code will load the R packages we will use\ninstall.packages(c(\"rcistats\"),\n                 repos = c(\"https://inqs909.r-universe.dev\", \"https://cloud.r-project.org\"))\nlibrary(rcistats)\nlibrary(tidyverse)\n\n\n# Uncomment and run for themes\n# rcistats::install_themes()\n# library(ThemePark)\n# library(ggthemes)\n```\n:::\n\n\n\n## Data for this handout\n\nWe will use the **Great American Coffee Taste Test** survey data from TidyTuesday. Below is a subset of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ncoffee <- read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2024/2024-05-14/coffee_survey.csv\")\n```\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-ee0e461c0b729eb7a550\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ee0e461c0b729eb7a550\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],[\"bl4QV6\",\"7d9kWR\",\"AlbXOy\",\"24xGdL\",\"zKQ5y0\",\"XeBplg\",\"NAB2dj\",\"zK0PpE\",\"pLP261\",\"EPb9ll\"],[\"25-34 years old\",\"35-44 years old\",\"35-44 years old\",\"35-44 years old\",\"35-44 years old\",\"25-34 years old\",\"25-34 years old\",\"35-44 years old\",\"25-34 years old\",\"18-24 years old\"],[\"1\",\"4\",\"Less than 1\",\"1\",\"3\",\"1\",\"2\",null,\"3\",\"1\"],[\"At the office\",\"At home\",\"At home\",\"At home, At the office\",\"At the office, At home, At a cafe\",\"At home\",\"At the office, At home\",\"At home, At the office\",\"At home, At the office\",\"At home\"],[null,\"Pour over, Espresso\",\"Other\",\"Pour over, Espresso, Coffee extract (e.g. Cometeer)\",\"Pour over, Espresso, Bean-to-cup machine\",\"Pour over, Espresso, Other\",\"Pour over, French press, Espresso\",\"French press, Espresso\",\"Pour over\",\"French press, Pod/capsule machine (e.g. Keurig/Nespresso)\"],[null,null,\"Aeropress\",null,null,\"AeroPress\",null,\"Aeropress\",null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[\"Mocha\",\"Espresso\",\"Latte\",\"Pourover\",\"Espresso\",\"Pourover\",\"Pourover\",\"Americano\",\"Pourover\",\"Regular drip coffee\"],[null,null,null,null,null,null,null,null,null,null],[\"Milk, dairy alternative, or coffee creamer\",\"No - just black\",\"No - just black\",\"No - just black\",\"Milk, dairy alternative, or coffee creamer, No - just black\",\"No - just black, Milk, dairy alternative, or coffee creamer\",\"No - just black\",null,\"No - just black\",\"No - just black\"],[null,null,null,null,null,null,null,null,null,null],[\"Almond milk\",null,null,null,\"Skim milk\",\"Whole milk, Flavored coffee creamer\",null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[\"Bright\",\"Sweet\",\"Fruity\",\"Bright\",\"Full Bodied\",\"Caramalized\",\"Chocolatey\",null,\"Juicy\",\"Full Bodied\"],[\"Medium\",\"Medium\",\"Very strong\",\"Medium\",\"Somewhat strong\",\"Somewhat strong\",\"Medium\",\"Somewhat strong\",\"Somewhat light\",\"Somewhat strong\"],[\"Medium\",\"Light\",\"Light\",\"Light\",\"Dark\",\"Medium\",\"Medium\",\"Medium\",\"Nordic\",\"Medium\"],[\"Full caffeine\",\"Full caffeine\",\"Half caff\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\",\"Full caffeine\"],[1,10,3,7,7,7,6,7,6,4],[1,1,3,3,2,2,2,null,1,3],[4,3,4,5,5,4,3,null,5,4],[4,4,4,2,5,5,3,null,5,3],[null,\"Cherry\\n\",\"stone fruit\",\"Astringent and a bit sweet\",\"Bright, citrusy. Acid-forward. Enjoyable but not first thing in the morning.\",\"Fruity, juicy, apple-like.\",\"Clean\\nFruity\\nCrisp\",null,\"Fruity\",null],[3,3,3,4,1,3,4,null,1,3],[2,2,3,2,1,2,2,null,3,3],[5,3,2,4,3,3,2,null,3,4],[null,\"Vanilla, tea, dark chocolate\",\"chocolate\",\"Darker, has less “coffee” taste\",\"Smooth. Little body, a bit empty but good. Easy.\",\"Kindof smokey, slight chocolate.\",\"Chocolate\\nMud\",null,\"Flat\",null],[3,4,4,3,3,4,3,null,3,2],[3,1,4,3,3,1,4,null,3,1],[3,2,2,5,5,4,4,null,2,5],[null,\"Kiwi fruit, milk chocolate, stale, berries\",null,\"Clean, sweet, a bit fruity\",\"Balanced. Medium body. Easy but substantial. Good for every time of the day.\",\"Some sort of stonefruit?\",\"Increasing bitterness as cooled\",null,\"Nutty\",null],[3,2,2,3,4,1,3,null,2,3],[5,4,5,5,4,5,4,null,4,5],[1,4,5,3,1,5,4,null,4,1],[null,\"Fermented fruit, cherries, sour\",\"fruity, tea (rooibos w/o the tobacco-y flavor), raspberry leaf\",\"Astringent\",\"Citrus forward with earthy aftertaste. Initially a bit fruity and sour then moves into earthy. A bit dirty in aftertaste.\",\"Very fruity, very juicy, bright, tea-like.\",\"Fermented fruit\\nComplex\",null,\"Fermented\",null],[\"Coffee B\",\"Coffee A\",\"Coffee A\",\"Coffee C\",\"Coffee C\",\"Coffee A\",\"Coffee C\",null,\"Coffee A\",\"Coffee C\"],[\"Coffee A\",\"Coffee A\",\"Coffee D\",\"Coffee A\",\"Coffee A\",\"Coffee A\",\"Coffee D\",null,\"Coffee A\",\"Coffee A\"],[\"Coffee A\",\"Coffee A\",\"Coffee C\",\"Coffee C\",\"Coffee C\",\"Coffee A\",\"Coffee D\",null,\"Coffee A\",\"Coffee C\"],[\"I primarily work in person\",\"I primarily work in person\",\"I primarily work from home\",\"I primarily work from home\",\"I primarily work from home\",\"I primarily work from home\",\"I do a mix of both\",null,\"I do a mix of both\",\"I do a mix of both\"],[\"&lt;$20\",\"$80-$100\",\"&lt;$20\",\"$40-$60\",\"$40-$60\",\"$20-$40\",\"$20-$40\",null,\"$40-$60\",\"&lt;$20\"],[\"I need the caffeine\",\"I need the ritual, I need the caffeine, It tastes good\",\"I need the caffeine, It tastes good\",\"It tastes good, I need the ritual\",\"It tastes good\",\"It tastes good, I need the caffeine\",\"It tastes good\",null,\"It tastes good, I need the caffeine, I need the ritual\",\"It tastes good, I need the caffeine\"],[null,null,null,null,null,null,null,null,null,null],[\"Yes\",\"Yes\",\"No\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",null,\"Yes\",\"Yes\"],[\"No\",\"Yes\",\"Yes\",\"No\",\"Yes\",\"Yes\",\"No\",null,\"Yes\",\"No\"],[\"$8-$10\",\"$6-$8\",\"$4-$6\",\"$6-$8\",\"$8-$10\",\"$4-$6\",\"$10-$15\",null,\"$10-$15\",\"$4-$6\"],[\"$8-$10\",\"$15-$20\",\"$4-$6\",\"More than $20\",\"$10-$15\",\"$6-$8\",\"$10-$15\",null,\"$10-$15\",\"$6-$8\"],[\"Yes\",\"No\",\"No\",\"No\",\"Yes\",\"Yes\",\"Yes\",null,\"No\",\"No\"],[\"$50-$100\",\"More than $1,000\",\"Less than $20\",\"More than $1,000\",\"$500-$1000\",\"$500-$1000\",\"$500-$1000\",null,\"More than $1,000\",\"$20-$50\"],[\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",\"Yes\",null,\"Yes\",\"Yes\"],[\"Female\",\"Male\",\"Female\",\"Male\",\"Male\",\"Female\",\"Male\",null,\"Male\",\"Female\"],[null,null,null,null,null,null,null,null,null,null],[\"Some college or associate's degree\",\"Bachelor's degree\",\"Master's degree\",\"Some college or associate's degree\",\"Doctorate or professional degree\",\"Master's degree\",\"Doctorate or professional degree\",null,\"Doctorate or professional degree\",\"Bachelor's degree\"],[\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",\"White/Caucasian\",null,\"White/Caucasian\",\"White/Caucasian\"],[null,null,null,null,null,null,null,null,null,null],[\"Employed full-time\",\"Employed part-time\",\"Homemaker\",\"Employed full-time\",\"Employed full-time\",\"Homemaker\",\"Employed full-time\",null,\"Employed full-time\",\"Employed part-time\"],[\"None\",\"None\",\"2\",\"None\",\"None\",\"None\",\"None\",null,\"None\",\"None\"],[\"No affiliation\",\"Democrat\",\"No affiliation\",\"Democrat\",\"No affiliation\",null,\"Independent\",null,\"No affiliation\",\"Democrat\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>submission_id<\\/th>\\n      <th>age<\\/th>\\n      <th>cups<\\/th>\\n      <th>where_drink<\\/th>\\n      <th>brew<\\/th>\\n      <th>brew_other<\\/th>\\n      <th>purchase<\\/th>\\n      <th>purchase_other<\\/th>\\n      <th>favorite<\\/th>\\n      <th>favorite_specify<\\/th>\\n      <th>additions<\\/th>\\n      <th>additions_other<\\/th>\\n      <th>dairy<\\/th>\\n      <th>sweetener<\\/th>\\n      <th>style<\\/th>\\n      <th>strength<\\/th>\\n      <th>roast_level<\\/th>\\n      <th>caffeine<\\/th>\\n      <th>expertise<\\/th>\\n      <th>coffee_a_bitterness<\\/th>\\n      <th>coffee_a_acidity<\\/th>\\n      <th>coffee_a_personal_preference<\\/th>\\n      <th>coffee_a_notes<\\/th>\\n      <th>coffee_b_bitterness<\\/th>\\n      <th>coffee_b_acidity<\\/th>\\n      <th>coffee_b_personal_preference<\\/th>\\n      <th>coffee_b_notes<\\/th>\\n      <th>coffee_c_bitterness<\\/th>\\n      <th>coffee_c_acidity<\\/th>\\n      <th>coffee_c_personal_preference<\\/th>\\n      <th>coffee_c_notes<\\/th>\\n      <th>coffee_d_bitterness<\\/th>\\n      <th>coffee_d_acidity<\\/th>\\n      <th>coffee_d_personal_preference<\\/th>\\n      <th>coffee_d_notes<\\/th>\\n      <th>prefer_abc<\\/th>\\n      <th>prefer_ad<\\/th>\\n      <th>prefer_overall<\\/th>\\n      <th>wfh<\\/th>\\n      <th>total_spend<\\/th>\\n      <th>why_drink<\\/th>\\n      <th>why_drink_other<\\/th>\\n      <th>taste<\\/th>\\n      <th>know_source<\\/th>\\n      <th>most_paid<\\/th>\\n      <th>most_willing<\\/th>\\n      <th>value_cafe<\\/th>\\n      <th>spent_equipment<\\/th>\\n      <th>value_equipment<\\/th>\\n      <th>gender<\\/th>\\n      <th>gender_specify<\\/th>\\n      <th>education_level<\\/th>\\n      <th>ethnicity_race<\\/th>\\n      <th>ethnicity_race_specify<\\/th>\\n      <th>employment_status<\\/th>\\n      <th>number_children<\\/th>\\n      <th>political_affiliation<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"p\",\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[19,20,21,22,24,25,26,28,29,30,32,33,34]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"submission_id\",\"targets\":1},{\"name\":\"age\",\"targets\":2},{\"name\":\"cups\",\"targets\":3},{\"name\":\"where_drink\",\"targets\":4},{\"name\":\"brew\",\"targets\":5},{\"name\":\"brew_other\",\"targets\":6},{\"name\":\"purchase\",\"targets\":7},{\"name\":\"purchase_other\",\"targets\":8},{\"name\":\"favorite\",\"targets\":9},{\"name\":\"favorite_specify\",\"targets\":10},{\"name\":\"additions\",\"targets\":11},{\"name\":\"additions_other\",\"targets\":12},{\"name\":\"dairy\",\"targets\":13},{\"name\":\"sweetener\",\"targets\":14},{\"name\":\"style\",\"targets\":15},{\"name\":\"strength\",\"targets\":16},{\"name\":\"roast_level\",\"targets\":17},{\"name\":\"caffeine\",\"targets\":18},{\"name\":\"expertise\",\"targets\":19},{\"name\":\"coffee_a_bitterness\",\"targets\":20},{\"name\":\"coffee_a_acidity\",\"targets\":21},{\"name\":\"coffee_a_personal_preference\",\"targets\":22},{\"name\":\"coffee_a_notes\",\"targets\":23},{\"name\":\"coffee_b_bitterness\",\"targets\":24},{\"name\":\"coffee_b_acidity\",\"targets\":25},{\"name\":\"coffee_b_personal_preference\",\"targets\":26},{\"name\":\"coffee_b_notes\",\"targets\":27},{\"name\":\"coffee_c_bitterness\",\"targets\":28},{\"name\":\"coffee_c_acidity\",\"targets\":29},{\"name\":\"coffee_c_personal_preference\",\"targets\":30},{\"name\":\"coffee_c_notes\",\"targets\":31},{\"name\":\"coffee_d_bitterness\",\"targets\":32},{\"name\":\"coffee_d_acidity\",\"targets\":33},{\"name\":\"coffee_d_personal_preference\",\"targets\":34},{\"name\":\"coffee_d_notes\",\"targets\":35},{\"name\":\"prefer_abc\",\"targets\":36},{\"name\":\"prefer_ad\",\"targets\":37},{\"name\":\"prefer_overall\",\"targets\":38},{\"name\":\"wfh\",\"targets\":39},{\"name\":\"total_spend\",\"targets\":40},{\"name\":\"why_drink\",\"targets\":41},{\"name\":\"why_drink_other\",\"targets\":42},{\"name\":\"taste\",\"targets\":43},{\"name\":\"know_source\",\"targets\":44},{\"name\":\"most_paid\",\"targets\":45},{\"name\":\"most_willing\",\"targets\":46},{\"name\":\"value_cafe\",\"targets\":47},{\"name\":\"spent_equipment\",\"targets\":48},{\"name\":\"value_equipment\",\"targets\":49},{\"name\":\"gender\",\"targets\":50},{\"name\":\"gender_specify\",\"targets\":51},{\"name\":\"education_level\",\"targets\":52},{\"name\":\"ethnicity_race\",\"targets\":53},{\"name\":\"ethnicity_race_specify\",\"targets\":54},{\"name\":\"employment_status\",\"targets\":55},{\"name\":\"number_children\",\"targets\":56},{\"name\":\"political_affiliation\",\"targets\":57}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Using the templates: what to change\n\nUse this legend whenever you see a **Template** code block.\n\n- **`DATA`** → replace with your data frame/tibble name (e.g., `coffee`).\n- **`VAR`** → replace with the **single categorical variable** you want (e.g., `caffeine`).\n  - In `ggplot(DATA, aes(x = VAR))`, write `ggplot(coffee, aes(x = caffeine))`.\n  - In functions that take a vector (e.g., `cat_stats(DATA$VAR)`), write `cat_stats(coffee$caffeine)`.\n- **`VAR1`** and **`VAR2`** → replace with the **first** and **second** categorical variables for two‑way tables/stacked bars (e.g., `caffeine`, `taste`).\n- **`DF` / `wdf` / `df_pie` / `waffle_df`** → these are **intermediate objects** created in the chunk. You can keep the same names or rename them; if you rename, update the subsequent line that uses them.\n- **`group = 1`** → keep this as‑is for one‑variable proportion bar charts; it ensures correct normalization.\n\n### Quick replace checklist\n1. Swap **`DATA`** for your data frame (usually `coffee`).\n2. Swap **`VAR`** for your categorical column (e.g., `caffeine`).\n3. For two‑variable templates, set **`VAR1`** and **`VAR2`** (e.g., `caffeine` and `taste`).\n4. If you change any intermediate object name (like `df_pie`), update it on the next line as well.\n\n### Tiny example\n\n**Template**\n```r\n# Frequency bar (template)\n ggplot(DATA, aes(x = VAR)) +\n   geom_bar()\n```\n\n**Filled‑in**\n```r\n# Frequency bar (coffee example)\n ggplot(coffee, aes(x = caffeine)) +\n   geom_bar()\n```\n\n**Template**\n```r\n# Crosstab row proportions (template)\n cat_stats(VAR1, VAR2, prop = \"row\")\n```\n\n**Filled‑in**\n```r\n# Crosstab row proportions (coffee example)\n cat_stats(coffee$caffeine, coffee$taste, prop = \"row\")\n```\n\n\n# Categorical Data\n\n**Categorical data** record membership in a set of categories (levels), e.g., \"Yes/No\", \"Major\", or \"City\".\n\n- Stored as text (character/factor) **or** as codes like `1, 2, 3` with a **codebook** describing the labels.\n\n\n# One‑variable summaries\n\n## Frequency (counts)\n\n**Definition:** number of observations in each category.\n\n**Template:**\n```r\n# Replace DATA$VAR with your variable\n# freq table (counts)\ncat_stats(DATA$VAR)\n```\n\n**Example:** caffeine preference (`coffee$caffeine`)\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>                  n   prop\n#> Decaf          136 0.0347\n#> Full caffeine 3576 0.9129\n#> Half caff      205 0.0523\n#> \n#> Number of Missing: 125\n#> Proportion of Missing: 0.0309252845126175\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n## Proportion (relative frequency)\n\n**Definition:** share of the sample in each category; comparable across sample sizes.\n\n**Template:**\n```r\n# proportions only\ncat_stats(DATA$VAR)\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#>                  n   prop\n#> Decaf          136 0.0347\n#> Full caffeine 3576 0.9129\n#> Half caff      205 0.0523\n#> \n#> Number of Missing: 125\n#> Proportion of Missing: 0.0309252845126175\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n:::\n\n\n# Two‑variable summaries (cross‑tabulation)\n\n\n## Cross‑tabulation (two‑way table)\n\n- **Rows**: categories of one variable\n- **Columns**: categories of the second variable\n- Report **counts** or **proportions** by **table**, **row**, or **column**\n\n**ALL**:\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> $frequency\n#>                \n#>                   No  Yes\n#>   Decaf           26   99\n#>   Full caffeine   66 3178\n#>   Half caff        6  173\n#> \n#> $table_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.0073 0.0279\n#>   Full caffeine 0.0186 0.8957\n#>   Half caff     0.0017 0.0488\n#> \n#> $row_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.2080 0.7920\n#>   Full caffeine 0.0203 0.9797\n#>   Half caff     0.0335 0.9665\n#> \n#> $col_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.2653 0.0287\n#>   Full caffeine 0.6735 0.9212\n#>   Half caff     0.0612 0.0501\n```\n\n\n:::\n:::\n\n\n\n**Table proportions** (each cell ÷ grand total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"table\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> $frequency\n#>                \n#>                   No  Yes\n#>   Decaf           26   99\n#>   Full caffeine   66 3178\n#>   Half caff        6  173\n#> \n#> $table_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.0073 0.0279\n#>   Full caffeine 0.0186 0.8957\n#>   Half caff     0.0017 0.0488\n```\n\n\n:::\n:::\n\n\n**Row proportions** (each cell ÷ its row total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"row\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> $frequency\n#>                \n#>                   No  Yes\n#>   Decaf           26   99\n#>   Full caffeine   66 3178\n#>   Half caff        6  173\n#> \n#> $row_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.2080 0.7920\n#>   Full caffeine 0.0203 0.9797\n#>   Half caff     0.0335 0.9665\n```\n\n\n:::\n:::\n\n\n**Column proportions** (each cell ÷ its column total):\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_stats(coffee$caffeine, coffee$taste, prop = \"col\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Continguency Table \n#>  \n#> Column Variable: coffee$taste\n#> Row Variable: coffee$caffeine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> $frequency\n#>                \n#>                   No  Yes\n#>   Decaf           26   99\n#>   Full caffeine   66 3178\n#>   Half caff        6  173\n#> \n#> $col_prop\n#>                \n#>                     No    Yes\n#>   Decaf         0.2653 0.0287\n#>   Full caffeine 0.6735 0.9212\n#>   Half caff     0.0612 0.0501\n```\n\n\n:::\n:::\n\n\n# Visualizing Categorical Data\n\n## Bar plots\n\n### Frequency bar plot\n\n**Template (frequency):**\n```r\n# ggplot() + geom_bar() counts rows per category by default\nggplot(DATA, aes(x = VAR)) +\n  geom_bar()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### Relative frequency bar plot\n\n**Template (proportion):**\n```r\n# after_stat(prop) computes proportions within the layer\nggplot(DATA, aes(x = VAR, y = after_stat(prop), group = 1)) +\n  geom_bar()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine, y = after_stat(prop), group = 1)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n::: callout-note\n**Tip:** Add labels/theme as needed: `labs(x = \"\", y = \"Proportion\") + theme_minimal()`\n:::\n\n\n## Stacked bar plots\n\n**Template:**\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar()\n```\n\n**Example (stacked counts):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine, fill = taste)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-10-1.png){fig-alt='A bar plot showing the caffeine levels by different tastes.' width=672}\n:::\n:::\n\n\n**Example (horizontal):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(y = caffeine, fill = taste)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n**Template (stacked proportions):**\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position = \"fill\") +\n  labs(y = \"Proportion\")\n```\n\n## Dodged Bar Plot\n\n**Template:**\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position=position_dodge())\n```\n\n**Example (dodged counts):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(x = caffeine, fill = taste)) +\ngeom_bar(position = position_dodge())\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n**Example (horizontal):**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(y = caffeine, fill = taste)) +\ngeom_bar(position = position_dodge())\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\n## Pie charts (use sparingly)\n\n**Note:** Pie charts can be harder to compare precisely than bars. If you use them, label clearly.\n\n**Template:**\n```r\nggplot(DATA, aes(fill = VAR)) +\n  geom_pie()\n```\n\n**Example:**\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(coffee, aes(fill = caffeine)) +\n  geom_pie()\n```\n\n::: {.cell-output-display}\n![](cat_stats_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n# Appendix: minimal templates (copy‑paste)\n\nEach template below has **placeholders** in ALL CAPS (e.g., `DATA`, `VAR`, `VAR1`, `VAR2`). Replace them with your own dataset name and variable names.\n\n\n## Frequency table\n\n```r\ncat_stats(DATA$VAR)   \n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n## Proportions only\n\n```r\ncat_stats(DATA$VAR, prop_only = TRUE)\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Bar Plot: Frequency\n\n```r\nggplot(DATA, aes(x = VAR)) + \n    geom_bar()\n```\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Bar Plot: Proportion\n\n```r\nggplot(DATA, aes(x = VAR, y = after_stat(prop), group = 1)) + \n    geom_bar()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n\n## Cross-tabulations (all)\n\n```r\ncat_stats(DATA$VAR1, DATA$VAR2)\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Cross-tabulations (proportions)\n\n```r\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"table\")\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"row\")\ncat_stats(DATA$VAR1, DATA$VAR2, prop = \"col\")\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Stacked Bar (counts)\n\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) + geom_bar()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Stacked Bar (proportions)\n\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position = \"fill\") + labs(y = \"Proportion\")\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n## Dodeged Bar Plot\n\n```r\nggplot(DATA, aes(x = VAR1, fill = VAR2)) +\n  geom_bar(position=position_dodge())\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR1` → a single categorical variable (e.g., `caffeine`).\n- `VAR2` → a single categorical variable (e.g., `taste`).\n\n\n## Pie Chart\n\n```r\nggplot(DATA, aes(fill = VAR)) +\n  geom_pie()\n```\n\n- `DATA` → the name of your dataset (e.g., `coffee`).\n- `VAR` → a single categorical variable (e.g., `caffeine`).\n\n",
    "supporting": [
      "cat_stats_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.9/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.34.0/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}